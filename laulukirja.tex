\documentclass{book}

\usepackage[a6paper, portrait, outer=0.7cm, inner=1.3cm, tmargin=1.7cm, bmargin=1.5cm]{geometry}
\usepackage[utf8]{inputenc}
\usepackage[finnish,swedish,english,russian]{babel}
\usepackage{verse}
\usepackage{imakeidx}
\usepackage{expl3}
\usepackage{calc} % widthof
\usepackage{tabto}
\usepackage{tikz}
\usepackage{titlesec} 
\usepackage{amssymb}
\usepackage{fancyhdr} % headers
\usepackage{etoolbox} % verse raggedright
\usepackage[official]{eurosym} % euro character
\usepackage{wasysym} % note character
\usepackage{graphicx}

\usepackage{afterpage}

\newcommand\blankpage{%
    \null
    \thispagestyle{empty}%
    \addtocounter{page}{-1}%
    \newpage}

% fix index indent on linewrap
% set raggedright in index
\usepackage[justific=raggedright,indentunit=0.1cm,columnsep=0.3cm]{idxlayout}

% right-justify verse lines properly
\AtBeginEnvironment{verse}{\raggedright}

% indent on newline
\setlength{\vindent}{0.5cm}

% header configuration
\pagestyle{fancy}
\renewcommand{\sectionmark}[1]{\markright{#1}}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt} % optional: removes header line
\fancyhead[LE,RO]{\rightmark}

\newcommand{\footerbits}[1]{\scriptsize \input{footer/binary#1}}
\fancyfoot[LE]{\small\thepage\ \footerbits{\thepage}}
\fancyfoot[RO]{\footerbits{\thepage}\ \small\thepage}

% rename index and apply .ist style
\makeindex[title=Hakemisto,options= -s hakemisto.ist]

\makeatletter
\def\@hspace#1{\begingroup\setlength\dimen@{#1}\hskip\dimen@\endgroup}
% format index title
\def\@makeschapterhead#1{%
  {\parindent \z@ \raggedright \normalfont
    \interlinepenalty\@M
    \large \bfseries #1\par\nobreak
    \vskip 10\p@
  }}
\makeatother

\begin{document}
\raggedbottom
\footnotesize
\pagenumbering{gobble}
\input{first_pages.tex}

\pagenumbering{arabic}
\setcounter{page}{0}
\input{laulut.tex}
% set header string
\pagebreak

\fancyhead[LE,RO]{{}}
\pagenumbering{gobble}
\printindex

\end{document}
